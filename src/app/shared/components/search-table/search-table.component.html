<mat-card class="card-container">
  <!-- <ng-container *ngIf="setSpinner; else showTable" >
    <div class="flex-spinner">
      <mat-spinner value="100" diameter="50"></mat-spinner>

    </div>
  </ng-container>

  <ng-template #showTable>
    <mat-form-field appearance="outline">
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
    </mat-form-field>
    <ng-container *ngIf="newType === 'City'">
      <button mat-stroked-button color="primary" (click)="openDialogNewCity()">New {{ newType }}</button>
    </ng-container>
    
    <table mat-table [dataSource]="tableDataSrc" matSort>
  
      <ng-container *ngFor="let col of tableCols">
        <ng-container [matColumnDef]="col">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> {{col | titlecase}} </th>
          <td mat-cell *matCellDef="let profile"> {{profile[col]}}</td>
        </ng-container>
      </ng-container>
      
      <tr mat-header-row *matHeaderRowDef="tableCols" ></tr>
      <tr mat-row *matRowDef="let row; columns: tableCols ;" (click)="openDialogEditDelete(row.id)"  matTooltip="Click to edit or delete "></tr>
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="5">No data matching the filter "{{input.value}}"</td>
      </tr>
    </table>
  </ng-template>

  <div [hidden]="setSpinner">
    <mat-paginator [pageSizeOptions]="[3, 5, 10, 15]"></mat-paginator>
  </div> -->
<!-- ////////////////////////////////////////tabla cities///////////////////////////////////////////// -->

<div *ngIf="newType === 'City'">
  <ng-container *ngIf="setSpinner; else showTable" >
    <div class="flex-spinner">
      <mat-spinner value="100" diameter="50"></mat-spinner>
  
    </div>
  </ng-container>
  
  <ng-template #showTable>
  
    <div style="width: 90%; margin-left: 5%; display: flex; align-items: center;">
      <mat-form-field class="input-no-padding"  appearance="outline" style="margin-right: 12px">
        <mat-icon matPrefix>search</mat-icon>
        <mat-label>Filter</mat-label>
        <input matInput class="input-no-padding" (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
      </mat-form-field>
      <ng-container *ngIf="newType === 'City'">
        <button mat-raised-button  color="primary" matTooltip="Create a city" (click)="openDialogNewCity()">
          <mat-icon style="margin-bottom:2px" matSuffix>add</mat-icon>
          New {{ newType }}</button>
      </ng-container>
    </div>
    
      <table mat-table [dataSource]="dataSource" matSort>
    
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
          <td mat-cell *matCellDef="let row"> {{row.id}} </td>
        </ng-container>
    
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
          <td mat-cell *matCellDef="let row"> {{row.name}} </td>
        </ng-container>
  
        <ng-container matColumnDef="timezone">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Timezone </th>
          <td mat-cell *matCellDef="let row"> {{row.timezone}} </td>
        </ng-container>
    
        <ng-container matColumnDef="created_at">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Created_at </th>
          <td mat-cell *matCellDef="let row"> {{row.created_at}} </td>
        </ng-container>
  
        <ng-container matColumnDef="updated_at">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Updated_at </th>
          <td mat-cell *matCellDef="let row"> {{row.updated_at}} </td>
        </ng-container>
  
        <ng-container matColumnDef="edit" >
          <th mat-header-cell *matHeaderCellDef mat-sort-header> </th>
          <td mat-cell *matCellDef="let row"> 
            <a mat-icon-button  matTooltip="Edit city" (click)="openDialogEditCity(row.id)"><mat-icon color="primary">edit</mat-icon> </a>
          </td>
        </ng-container>
  
        <ng-container matColumnDef="delete">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> </th>
          <td mat-cell *matCellDef="let row"> 
            <a mat-icon-button matTooltip="Delete city" (click)="openDialogDelete(row.id, row.name)"><mat-icon color="warn">delete</mat-icon> </a>
          </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedCitiesColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedCitiesColumns;"></tr>
    
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
        </tr>
      </table>
      <div [hidden]="setSpinner">
        <mat-paginator [pageSizeOptions]="[3, 5, 10, 20]" aria-label="Select page of users"></mat-paginator>
      </div> 
  </ng-template>
  
</div>

<!-- ////////////////////////////////////////tabla users//////////////////////////////// -->

<div *ngIf="newType === 'User'">
  <ng-container *ngIf="setSpinner; else showTable2" >
    <div class="flex-spinner">
      <mat-spinner value="100" diameter="50"></mat-spinner>
  
    </div>
  </ng-container>
  
  <ng-template #showTable2>

    <div style="width: 90%; margin-left: 5%; display: flex; align-items: center;">
      <mat-form-field class="input-no-padding"  appearance="outline" style="margin-right: 12px">
        <mat-icon matPrefix>search</mat-icon>
        <mat-label>Filter</mat-label>
        <input matInput class="input-no-padding" (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
      </mat-form-field>
      <ng-container *ngIf="newType === 'User'">
        <button [disabled]="(newType === 'User')? true:false" mat-raised-button  color="primary" matTooltip="Create a city" >
          <mat-icon style="margin-bottom:2px" matSuffix>add</mat-icon>
          New {{ newType }}</button>
      </ng-container>
    </div>
 
      <table mat-table [dataSource]="dataSource" matSort>
    
        <ng-container  matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
          <td  mat-cell *matCellDef="let row"> {{row.id}} </td>
        </ng-container>
  
        <ng-container matColumnDef="city_id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> city_id </th>
          <td  mat-cell *matCellDef="let row"> {{row.city_id}} </td>
        </ng-container>
  
        <ng-container matColumnDef="user_id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> user_id </th>
          <td  mat-cell  *matCellDef="let row"> {{row.user_id}} </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedUsersColumns" ></tr>
        <tr mat-row *matRowDef="let row; columns: displayedUsersColumns;"  matTooltip="Click to see user" (click)="onClick(row.id)" ></tr>
    
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
        </tr>
      </table>
   
  </ng-template>
 
  <div [hidden]="setSpinner">
    <mat-paginator [pageSizeOptions]="[3, 5, 10, 20]" aria-label="Select page of users"></mat-paginator>
  </div> 
</div>

</mat-card>

  

  